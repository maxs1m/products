(this.webpackJsonptest4=this.webpackJsonptest4||[]).push([[0],{17:function(e,t,c){},47:function(e,t,c){},93:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c.n(n),a=c(24),s=c.n(a),i=(c(47),c(17),c(48),c(4)),o=c(9),l=c(15),u=c.n(l),d=c(19),b=c(30),j=c(3),h=c(40),p=c.n(h).a.create({baseURL:"https://fakestoreapi.com/"}),O=function(e){return p.get("products/?limit=".concat(e)).then((function(e){return e.data}))},f=function(e){return p.post("products",Object(j.a)({},e)).then((function(e){return e.data}))},m=function(e,t){return p.put("products/".concat(t),Object(j.a)({},e)).then((function(e){return e.data}))},x=function(e){return p.delete("products/".concat(e)).then((function(e){return e.data}))},v=function(e){return p.post("auth/login",Object(j.a)({},e)).then((function(e){return e.data}))},g="SET",_="TOGGLE_IS_FETCHING",w="TOGGLE_TAB",N="ADD_PRODUCT",y="SET_TOKEN",S={productsDownload:[],productsCreate:[],isFetching:!1,viewTab:"download",token:""},k=function(e,t){return{type:g,download:e,create:t}},C=function(e){return{type:_,isFetching:e}},E=function(){return JSON.parse(localStorage.getItem("session"))},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;return function(){var t=Object(d.a)(u.a.mark((function t(c){var n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(C(!0)),t.next=3,O(e);case 3:n=t.sent,r=E()||[],c(k(n,r.slice(0,e))),c(C(!1));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},P=function(e,t){localStorage.session=JSON.stringify(t),e(function(e){return{type:N,sessionMass:e}}(t=JSON.parse(localStorage.getItem("session")))),e(C(!1))},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(j.a)(Object(j.a)({},e),{},{productsDownload:Object(b.a)(t.download),productsCreate:Object(b.a)(t.create)});case _:return Object(j.a)(Object(j.a)({},e),{},{isFetching:t.isFetching});case w:return Object(j.a)(Object(j.a)({},e),{},{viewTab:t.tab});case y:return Object(j.a)(Object(j.a)({},e),{},{token:t.token});case N:return Object(j.a)(Object(j.a)({},e),{},{productsCreate:t.sessionMass});default:return e}},F=c(7),A=c(8),B=c(0),I=function(e){return Object(B.jsxs)(A.b,{to:"/product/"+e.product.id,className:"product__container",children:[Object(B.jsx)("div",{className:"productImage__container",children:Object(B.jsx)("img",{src:e.product.image,alt:"image",className:"productImage"})}),Object(B.jsxs)("div",{className:"product__info_short",children:[Object(B.jsx)("span",{children:e.product.title}),Object(B.jsxs)("span",{children:[e.product.price,"$"]})]})]})},L=c.p+"static/media/spinner.464a6fda.gif",U=function(){return Object(B.jsx)("div",{className:"preloader",children:Object(B.jsx)("img",{src:L,style:{width:"300px"},alt:"load"})})},M=Object(o.b)((function(e){return{download:e.products.productsDownload,create:e.products.productsCreate,tab:e.products.viewTab,isFetching:e.products.isFetching}}),{getProducts:T,toggleTab:function(e){return{type:w,tab:e}}})((function(e){var t=Object(n.useState)([]),c=Object(F.a)(t,2),r=c[0],a=c[1],s=Object(n.useState)(!1),i=Object(F.a)(s,2),o=i[0],l=i[1],u=Object(n.useState)(""),d=Object(F.a)(u,2),b=d[0],j=d[1],h=Object(n.useState)(""),p=Object(F.a)(h,2),O=p[0],f=p[1],m=Object(n.useState)([]),x=Object(F.a)(m,2),v=x[0],g=x[1],_=Object(n.useState)(""),w=Object(F.a)(_,2),N=w[0],y=w[1];Object(n.useEffect)((function(){switch(e.tab){case"download":a(e.download);break;case"create":a(e.create.filter((function(e){return e.published===o})))}f(""),y("")}),[e.tab,e.create]),Object(n.useEffect)((function(){g(Array.from(new Set(r.map((function(e){return e.category})))))}),[r]);return e.isFetching?Object(B.jsx)(U,{}):Object(B.jsx)(B.Fragment,{children:Object(B.jsxs)("div",{className:"products__container",children:[0===r.length&&Object(B.jsx)("div",{children:"There are no products"}),Object(B.jsxs)("div",{className:"btn__container_switch",children:[Object(B.jsx)("button",{className:"waves-effect waves-light blue lighten-1 btn",onClick:function(){return e.toggleTab("download")},children:"Downloaded products"}),Object(B.jsx)("button",{className:"waves-effect waves-light blue lighten-1 btn",onClick:function(){return e.toggleTab("create")},children:"Created products"}),"create"===e.tab&&Object(B.jsx)("div",{className:"switch",children:Object(B.jsxs)("label",{children:["Not published",Object(B.jsx)("input",{type:"checkbox",onChange:function(){l(!o),a(e.create.filter((function(e){return e.published===!o})))}}),Object(B.jsx)("span",{className:"lever"}),"Published"]})})]}),Object(B.jsx)("div",{className:"search",children:Object(B.jsx)("input",{value:b,type:"text",onChange:function(e){return j(e.target.value)},placeholder:"Searching by title"})}),Object(B.jsx)("div",{className:"filter",children:Object(B.jsxs)("select",{onChange:function(e){f(e.nativeEvent.target.value)},value:O,className:"browser-default",children:[Object(B.jsx)("option",{value:"",children:"Filter by"}),v.map((function(e,t){return Object(B.jsx)("option",{value:e,children:e},t)}))]})}),Object(B.jsx)("div",{className:"sort",children:Object(B.jsxs)("select",{onChange:function(e){!function(e){var t=Object.assign([],r);switch(e){case"priceUp":a(t.sort((function(e,t){return e.price-t.price}))),y("Price up");break;case"priceDown":a(t.sort((function(e,t){return t.price-e.price}))),y("Price down");break;case"titleUp":a(t.sort((function(e,t){return e.title<t.title?-1:e.title>t.title?1:void 0}))),y("Title up");break;case"titleDown":a(t.sort((function(e,t){return e.title<t.title?1:e.title>t.title?-1:void 0}))),y("Title down")}}(e.nativeEvent.target.value)},value:N,className:"browser-default",children:[Object(B.jsx)("option",{value:"",disabled:!0,children:"Sort"}),Object(B.jsx)("option",{value:"titleUp",children:"Title up"}),Object(B.jsx)("option",{value:"titleDown",children:"Title down"}),Object(B.jsx)("option",{value:"priceUp",children:"Price up"}),Object(B.jsx)("option",{value:"priceDown",children:"Price down"})]})}),Object(B.jsx)(A.b,{to:"/product/create",className:"btn__container_add",children:Object(B.jsx)("button",{className:"waves-effect waves-light blue lighten-1 btn",children:"Add Product"})}),r.filter((function(e){return e.title.toLowerCase().indexOf(b.toLowerCase())>=0})).filter((function(e){return e.category.toLowerCase().indexOf(O.toLowerCase())>=0})).map((function(e){return Object(B.jsx)(I,{product:e},e.id)})),Object(B.jsxs)("div",{className:"btn__container_count",children:[8!==r.length&&("download"===e.tab||"create"===e.tab&&e.create.length>8)&&Object(B.jsx)("button",{className:"waves-effect waves-light blue lighten-1 btn",onClick:function(){return e.getProducts()},children:"Download 8 items"}),16!==r.length&&("download"===e.tab||"create"===e.tab&&e.create.length>16)&&Object(B.jsx)("button",{className:"waves-effect waves-light blue lighten-1 btn",onClick:function(){return e.getProducts(16)},children:"Download 16 items"}),20!==r.length&&("download"===e.tab||"create"===e.tab&&e.create.length>20)&&Object(B.jsx)("button",{className:"waves-effect waves-light blue lighten-1 btn",onClick:function(){return e.getProducts(20)},children:"Download 20 items"})]})]})})})),G=c(16),J=c(26),R=c.n(J),V=Object(G.c)(Object(o.b)((function(e){return{download:e.products.productsDownload,create:e.products.productsCreate}}),{deleteProduct:function(e){return function(){var t=Object(d.a)(u.a.mark((function t(c){var n,r,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(C(!0)),t.next=3,x(e);case 3:for(n=t.sent,console.log(n),(r=E()).splice(r.findIndex((function(t){return t.id===e})),1),a=e;a<=r.length;a++)r[a-1].id=a;P(c,r);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),i.g)((function(e){var t=Object(n.useState)({}),c=Object(F.a)(t,2),r=c[0],a=c[1],s=Object(n.useState)(!1),o=Object(F.a)(s,2),l=o[0],u=o[1],d=Number(e.match.params.productId);Object(n.useEffect)((function(){a(d>20?e.create.find((function(e){return e.id===d})):e.download.find((function(e){return e.id===d})))}));return r?Object(B.jsxs)("div",{className:"product__info_large",children:[Object(B.jsx)(A.b,{to:"/products",className:"btn__container_back",children:Object(B.jsx)("button",{className:"waves-effect waves-light blue lighten-1 btn",children:"Back"})}),Object(B.jsx)("div",{className:"productImage__container_large",children:Object(B.jsx)("img",{src:r.image,alt:"image",className:"productImage"})}),Object(B.jsxs)("div",{className:"product__description",children:[Object(B.jsx)("span",{children:r.title}),Object(B.jsxs)("span",{children:["Category: ",r.category]}),Object(B.jsx)("span",{children:r.description}),Object(B.jsxs)("span",{children:[r.price,"$"]})]}),d>20&&Object(B.jsxs)("div",{className:"btn__container_edit_delete",children:[Object(B.jsx)(A.b,{to:"/product/edit"+d,children:Object(B.jsx)("button",{className:"waves-effect waves-light blue lighten-1 btn",children:"Edit"})}),Object(B.jsx)("div",{children:Object(B.jsx)("button",{className:"waves-effect waves-light blue lighten-1 btn",onClick:function(){return u(!0)},children:"Delete"})})]}),l&&Object(B.jsx)(R.a,{warning:!0,showCancel:!0,confirmBtnText:"Yes, delete it!",confirmBtnBsStyle:"danger",cancelBtnBsStyle:"default",title:"Are you sure?",onConfirm:function(){e.deleteProduct(d)},onCancel:function(){return u(!1)},children:"You will not be able to recover this product!"})]}):Object(B.jsx)(i.a,{to:"/products"})})),Y=c(6),$=function(e){return e?void 0:"Field is required"},X=function(e){return function(t){return t&&t.length>e?"Max length is ".concat(e," symbols"):void 0}},q=function(e){return function(t){return t&&t.length<e?"Min length is ".concat(e," symbols"):void 0}},H=function(){for(var e=arguments.length,t=new Array(e),c=0;c<e;c++)t[c]=arguments[c];return function(e){return t.reduce((function(t,c){return t||c(e)}),void 0)}},K=Object(o.b)((function(e){return{isFetching:e.products.isFetching}}),{saveProductsOnLS:function(e){return function(){var t=Object(d.a)(u.a.mark((function t(c,n){var r,a,s,i,o,l;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(C(!0)),r=n().products.productsCreate.length+21,a=Date.now(),"https://cn-exclusive.by/wp-content/uploads/2021/04/no-foto-2-1536x1024.jpg",s=e.published||!1,delete e.published,i=Object(j.a)(Object(j.a)({},e),{},{image:"https://cn-exclusive.by/wp-content/uploads/2021/04/no-foto-2-1536x1024.jpg"}),t.next=9,f(i);case 9:o=t.sent,(l=E()||[]).push(Object(j.a)(Object(j.a)({},o),{},{date:a,published:s,id:r})),P(c,l);case 13:case"end":return t.stop()}}),t)})));return function(e,c){return t.apply(this,arguments)}}()}})((function(e){var t=Object(n.useState)(!1),c=Object(F.a)(t,2),r=c[0],a=c[1];return r&&!e.isFetching?Object(B.jsx)(i.a,{to:"/products"}):Object(B.jsxs)(B.Fragment,{children:[" ",e.isFetching?Object(B.jsx)(U,{}):Object(B.jsxs)("div",{className:"productAdd__container",children:[Object(B.jsx)(A.b,{to:"/products",className:"btn__container_back",children:Object(B.jsx)("button",{className:"waves-effect waves-light blue lighten-1 btn",children:"Back"})}),Object(B.jsx)(Y.b,{onSubmit:function(t){e.saveProductsOnLS(t),a(!0)},render:function(e){return Object(B.jsxs)("form",{onSubmit:e.handleSubmit,className:"form",children:[Object(B.jsx)("div",{className:"productAdd__title",children:"Add product"}),Object(B.jsx)(Y.a,{name:"title",validate:H($,X(30),q(2)),children:function(e){var t=e.input,c=e.meta;return Object(B.jsxs)("div",{className:"form__box",children:[Object(B.jsx)("label",{className:"form__label",children:"Title"}),Object(B.jsx)("input",Object(j.a)(Object(j.a)({},t),{},{type:"text",placeholder:"Enter title"})),c.error&&c.touched&&Object(B.jsx)("span",{className:"form__error",children:c.error})]})}}),Object(B.jsx)(Y.a,{name:"description",validate:H($,X(300),q(10)),children:function(e){var t=e.input,c=e.meta;return Object(B.jsxs)("div",{className:"form__box",children:[Object(B.jsx)("label",{className:"form__label",children:"Description"}),Object(B.jsx)("input",Object(j.a)(Object(j.a)({},t),{},{type:"text",placeholder:"Enter description"})),c.error&&c.touched&&Object(B.jsx)("span",{className:"form__error",children:c.error})]})}}),Object(B.jsx)(Y.a,{name:"category",validate:H($,X(30),q(2)),children:function(e){var t=e.input,c=e.meta;return Object(B.jsxs)("div",{className:"form__box",children:[Object(B.jsx)("label",{className:"form__label",children:"Category"}),Object(B.jsx)("input",Object(j.a)(Object(j.a)({},t),{},{type:"text",placeholder:"Enter category"})),c.error&&c.touched&&Object(B.jsx)("span",{className:"form__error",children:c.error})]})}}),Object(B.jsx)(Y.a,{name:"price",validate:$,children:function(e){var t=e.input,c=e.meta;return Object(B.jsxs)("div",{className:"form__box",children:[Object(B.jsx)("label",{className:"form__label",children:"Price"}),Object(B.jsx)("input",Object(j.a)(Object(j.a)({},t),{},{type:"number",placeholder:"Enter price"})),c.error&&c.touched&&Object(B.jsx)("span",{className:"form__error",children:c.error})]})}}),Object(B.jsx)(Y.a,{name:"published",type:"checkbox",children:function(e){var t=e.input;return Object(B.jsx)("div",{className:"form__box",children:Object(B.jsxs)("label",{className:"form__label",children:[Object(B.jsx)("input",Object(j.a)(Object(j.a)({},t),{},{type:"checkbox"})),Object(B.jsx)("span",{children:"Published"})]})})}}),Object(B.jsx)("div",{className:"form__btn",children:Object(B.jsx)("button",{className:"waves-effect waves-light blue lighten-1 btn",type:"submit",children:"Submit"})})]})}})]})]})})),z=Object(G.c)(Object(o.b)((function(e){return{create:e.products.productsCreate,isFetching:e.products.isFetching}}),{updateProduct:function(e,t){return function(){var c=Object(d.a)(u.a.mark((function c(n,r){var a,s,i,o,l,d,b;return u.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n(C(!0)),a=r().products.productsCreate.find((function(e){return e.id===t})).image,s=Date.now(),i=e.published,delete e.published,o=Object(j.a)(Object(j.a)({},e),{},{image:a}),c.next=8,m(o,t);case 8:l=c.sent,d=E(),b=d.map((function(e){return e.id===t?Object(j.a)(Object(j.a)(Object(j.a)({},e),l),{},{date:s,published:i,id:t}):e})),P(n,b);case 12:case"end":return c.stop()}}),c)})));return function(e,t){return c.apply(this,arguments)}}()}}),i.g)((function(e){var t=Object(n.useState)(!1),c=Object(F.a)(t,2),r=c[0],a=c[1],s=Object(n.useState)(!1),o=Object(F.a)(s,2),l=o[0],u=o[1],d=Object(n.useState)({}),b=Object(F.a)(d,2),h=b[0],p=b[1],O=Number(e.match.params.productId);Object(n.useEffect)((function(){p(e.create.find((function(e){return e.id===O})))}),[]);return r&&!e.isFetching?Object(B.jsx)(i.a,{to:"/product/"+O}):Object(B.jsxs)(B.Fragment,{children:[" ",e.isFetching?Object(B.jsx)(U,{}):Object(B.jsxs)("div",{className:"productAdd__container",children:[Object(B.jsx)(A.b,{to:"/product/"+O,className:"btn__container_back",children:Object(B.jsx)("button",{className:"waves-effect waves-light blue lighten-1 btn",children:"Back"})}),Object(B.jsx)(Y.b,{onSubmit:function(e){p(e),u(!0)},initialValues:Object(j.a)({},h),render:function(e){return Object(B.jsxs)("form",{onSubmit:e.handleSubmit,className:"form",children:[Object(B.jsx)("div",{className:"productAdd__title",children:"Add product"}),Object(B.jsx)(Y.a,{name:"title",validate:H($,X(30),q(2)),children:function(e){var t=e.input,c=e.meta;return Object(B.jsxs)("div",{className:"form__box",children:[Object(B.jsx)("label",{className:"form__label",children:"Title"}),Object(B.jsx)("input",Object(j.a)(Object(j.a)({},t),{},{type:"text",placeholder:"Enter title"})),c.error&&c.touched&&Object(B.jsx)("span",{className:"form__error",children:c.error})]})}}),Object(B.jsx)(Y.a,{name:"description",validate:H($,X(300),q(10)),children:function(e){var t=e.input,c=e.meta;return Object(B.jsxs)("div",{className:"form__box",children:[Object(B.jsx)("label",{className:"form__label",children:"Description"}),Object(B.jsx)("input",Object(j.a)(Object(j.a)({},t),{},{type:"text",placeholder:"Enter description"})),c.error&&c.touched&&Object(B.jsx)("span",{className:"form__error",children:c.error})]})}}),Object(B.jsx)(Y.a,{name:"category",validate:H($,X(30),q(2)),children:function(e){var t=e.input,c=e.meta;return Object(B.jsxs)("div",{className:"form__box",children:[Object(B.jsx)("label",{className:"form__label",children:"Category"}),Object(B.jsx)("input",Object(j.a)(Object(j.a)({},t),{},{type:"text",placeholder:"Enter category"})),c.error&&c.touched&&Object(B.jsx)("span",{className:"form__error",children:c.error})]})}}),Object(B.jsx)(Y.a,{name:"price",validate:$,children:function(e){var t=e.input,c=e.meta;return Object(B.jsxs)("div",{className:"form__box",children:[Object(B.jsx)("label",{className:"form__label",children:"Price"}),Object(B.jsx)("input",Object(j.a)(Object(j.a)({},t),{},{type:"number",placeholder:"Enter price"})),c.error&&c.touched&&Object(B.jsx)("span",{className:"form__error",children:c.error})]})}}),Object(B.jsx)(Y.a,{name:"published",type:"checkbox",children:function(e){var t=e.input;return Object(B.jsx)("div",{className:"form__box",children:Object(B.jsxs)("label",{className:"form__label",children:[Object(B.jsx)("input",Object(j.a)(Object(j.a)({},t),{},{type:"checkbox"})),Object(B.jsx)("span",{children:"Published"})]})})}}),Object(B.jsx)("div",{className:"form__btn",children:Object(B.jsx)("button",{className:"waves-effect waves-light blue lighten-1 btn",type:"submit",children:"Submit"})})]})}}),l&&Object(B.jsx)(R.a,{warning:!0,showCancel:!0,confirmBtnText:"Yes",confirmBtnBsStyle:"primary",cancelBtnBsStyle:"default",title:"Are you sure?",onConfirm:function(){e.updateProduct(h,O),a(!0)},onCancel:function(){return u(!1)},children:"Do you want to save the changes?"})]})," "]})})),Q=Object(o.b)(null,{getToken:function(e){return function(){var t=Object(d.a)(u.a.mark((function t(c){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(C(!0)),t.next=3,v(e);case 3:n=t.sent,c({type:y,token:n}),c(C(!1));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){return Object(B.jsx)("div",{className:"productAdd__container",children:Object(B.jsx)(Y.b,{onSubmit:function(t){e.getToken(t)},initialValues:{username:"johnd",password:"m38rmF$"},render:function(e){var t=e.handleSubmit;return Object(B.jsxs)("form",{onSubmit:t,children:[Object(B.jsxs)("div",{className:"productAdd__title",children:[Object(B.jsx)("p",{children:"Please login to see products"})," ",Object(B.jsx)("p",{children:"(only this values)"})]}),Object(B.jsx)(Y.a,{name:"username",validate:$,children:function(e){var t=e.input,c=e.meta;return Object(B.jsxs)("div",{className:"form__box",children:[Object(B.jsx)("input",Object(j.a)(Object(j.a)({},t),{},{type:"text",placeholder:"Enter name"})),c.error&&c.touched&&Object(B.jsx)("span",{className:"form__error",children:c.error})]})}}),Object(B.jsx)(Y.a,{name:"password",validate:$,children:function(e){var t=e.input,c=e.meta;return Object(B.jsxs)("div",{className:"form__box",children:[Object(B.jsx)("input",Object(j.a)(Object(j.a)({},t),{},{type:"password",placeholder:"Enter password"})),c.error&&c.touched&&Object(B.jsx)("span",{className:"form__error",children:c.error})]})}}),Object(B.jsx)("div",{className:"form__btn",children:Object(B.jsx)("button",{className:"waves-effect waves-light blue lighten-1 btn",type:"submit",children:"Login"})})]})}})})}));var W=Object(o.b)((function(e){return{download:e.products.productsDownload,create:e.products.productsCreate,token:e.products.token}}),{getProducts:T})((function(e){return Object(n.useEffect)((function(){e.getProducts()}),[]),e.token?Object(B.jsx)("div",{className:"App",children:Object(B.jsxs)(i.d,{children:[Object(B.jsx)(i.b,{exact:!0,path:"/",children:Object(B.jsx)(i.a,{to:"/products"})}),Object(B.jsx)(i.b,{path:"/products",children:Object(B.jsx)(M,{})}),Object(B.jsx)(i.b,{exact:!0,path:"/product/create",children:Object(B.jsx)(K,{})}),Object(B.jsx)(i.b,{exact:!0,path:"/product/edit:productId?",children:Object(B.jsx)(z,{})}),Object(B.jsx)(i.b,{path:"/product/:productId?",children:Object(B.jsx)(V,{})}),Object(B.jsx)(i.b,{path:"*",children:Object(B.jsx)("div",{children:"404 not Found"})})]})}):Object(B.jsx)(Q,{})})),Z=c(42),ee=Object(G.b)({products:D}),te=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||G.c,ce=Object(G.d)(ee,te(Object(G.a)(Z.a)));s.a.render(Object(B.jsx)(r.a.StrictMode,{children:Object(B.jsx)(A.a,{children:Object(B.jsx)(o.a,{store:ce,children:Object(B.jsx)(W,{})})})}),document.getElementById("root"))}},[[93,1,2]]]);
//# sourceMappingURL=main.6ab36f0f.chunk.js.map